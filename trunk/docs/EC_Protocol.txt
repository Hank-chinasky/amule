Section 1: Protocol definition
------------------------------

Short description:

    EC protocol consist of two layers: a low-level transmission layer, and
    a high level application layer.

Transmission layer:

    The transmission layer consists of (currently) one byte data, that is
    prepended to the actual application data.

    Bit description: x01rrrrc

	x: eXtension flag, should be 0.
	r: Reserved for later use
	c: Compression flag 1 = application data is compressed.


Application layer:

    A packet contains the following:
	[ec_opcode_t] OPCODE
	[uint16] TAGCOUNT
	    <tags>

    Tags consist of:
	[ec_tagname_t] TAGNAME
	[ec_taglen_t] TAGLEN
	<[uint16] TAGCOUNT>?
	    <sub-tags>
	    <tag data>

    Tags may contain sub-tags to store the information, and a TAGCOUNT field
    is present only for these types of tags. You can test if a packet is to
    hold subpackets with HasTagCount(tagName). (Actually, a packet contains a
    TAGCOUNT field when the highest bit of its name is set.)
